<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="login-signup.css"></link>
</head>
<body>
    <div class="main-wrapper" style="width: 100%; height: 100%;">
        <div class="container">
            <div class="container_content">
                <div class="leftSidebar">
                    <h1>Alarm Clock Online</h1>
                    <p>Alarm Clock Online giúp bạn kiểm soát thời gian một cách hợp lý</p>
                </div>
                <div class="rightSidebar">
                    <form id="form_login">
                        <h1>Login</h1>
                        <input id="name" type="name" placeholder="Name" name="usn" required>

                        <input id="email"type="text" placeholder="Email" name="email" required>

                        <input id= "password" type="password" placeholder="Password" name="psw" required>

                        <button class="formButton" onclick="login()">Login</button>
                        <p>Don't have an account? <a href="./signup.html">Sign up</a></p>
                        <p id="checkCase"></p>
                    </form>
                </div>
            </div>
        </div>    
    </div>
    <script> 
    function login() {
        let input_email = document.getElementById("email").value;
        let input_password = document.getElementById("password").value;
        let input_name = document.getElementById("name").value;
        let caseBlock = document.getElementById("checkCase");

        let listPassword = JSON.parse(localStorage.getItem("listPassword"));
        let listEmail = JSON.parse(localStorage.getItem("listUsers"));

    let flag = false;
    for ( let i = 0; i < listEmail.length && i < listPassword.length; i++) {
        if( input_email == listEmail[i] && input_password == listPassword[i]) {
            index = i;
            localStorage.setItem("recentUser", index)
            console.log("Sign in successful");
            caseBlock.innerHTML = "Sign in successful";
            caseBlock.style.color = "green";
            setTimeout(function(){ location.replace("schedule.html"); }, 3000)
            break;
        }
        else {
            console.log("Error");
            caseBlock.innerHTML = "Sign in failed";
            caseBlock.style.color = "red";
        }1
    }
}

// function setName() {

//     if (localStorage.getItem("recentUser") !=null) {
//         let user = JSON.parse(localStorage.getItem("recentUser"));
//         let username = JSON.parse(localStorage.getItem("listUserName"));
//         document.getElementById("message").innerHTML = username[Number(user)] + "Schedule";
//     }
    
// }
    </script>
</body>
</html>