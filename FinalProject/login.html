<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href=""></link>
</head>
<body>
    <div class="container" style="width: 100%; height: 100%;">
        <div id="leftSidebar">

        </div>
        <div id="rightSidebar">
            <h1>Login</h1>
            <label for="usn">Username</label>
            <input id="name" type="name" placeholder="Name" name="usn" required>

            <label for="email"><b>Email</b></label>
            <input id="email"type="text" placeholder="Enter Email" name="email" required>

            <label for="psw"><b>Password</b></label>
            <input id= "password" type="password" placeholder="Enter Password" name="psw" required>

            <button class="formButton" onclick="login()">Login</button>
            <p>Don't have an account? <a href="./signup.html">Sign up</a></p>
            <p id="checkCase"></p>
        </div>
    <script> 
    function login() {
        let input_email = document.getElementById("email").value;
        let input_password = document.getElementById("password").value;
        let input_name = document.getElementById("name").value;
        let caseBlock = document.getElementById("checkCase");

        let listPassword = JSON.parse(localStorage.getItem("listPassword"));
        let listEmail = JSON.parse(localStorage.getItem("listUsers"));

        let mailformat = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;
        if(inputText.value.match(mailformat)) {
            alert("Valid email address!");
            document.form1.text1.focus();
            return true;
        }
        else {
            alert("You have entered an invalid email address!");
            document.form1.text1.focus();
            return false;
        }
    let flag = false;
    for ( let i = 0; i < listEmail.length && i < listPassword.length; i++) {
        if( input_email == listEmail[i] && input_password == listPassword[i]) {
            index = i;
            localStorage.setItem("recentUser", index)
            console.log("Sign in successful");
            caseBlock.innerHTML = "Sign in successful";
            caseBlock.style.color = "green";
            setTimeout(function(){ location.replace("schedule.html"); }, 3000)
            break;
        }
        else {
            console.log("Error");
            caseBlock.innerHTML = "Sign in failed";
            caseBlock.style.color = "red";
        }1
    }
}

// function setName() {

    // if (localStorage.getItem("recentUser") !=null) {
    //     let user = JSON.parse(localStorage.getItem("recentUser"));
    //     let username = JSON.parse(localStorage.getItem("listUserName"));
    //     document.getElementById("message").innerHTML = "Hello" + username[Number(user)] + "!";
    // }
    
// }
    </script>
    </div>
</body>
</html>